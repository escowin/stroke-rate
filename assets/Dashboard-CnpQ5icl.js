import{j as e,F as A,a as k,b as C,u as b,B as H,c as M,d as w,e as S,f as I,g as L,h as y,i as D}from"./index-zgSWJsnz.js";import{r,b as E,L as F,C as z,X as Z,Y as B,T as U,c as O,d as K}from"./charts-B1bCY1bQ.js";import"./react-vendor-gH-7aFTg.js";import"./utils-DAMCNxQJ.js";import"./ui-vendor-D0WmmUFL.js";function W({title:t,titleId:c,...u},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":c},u),t?r.createElement("title",{id:c},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 10.5h.375c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125H21M3.75 18h15A2.25 2.25 0 0 0 21 15.75v-6a2.25 2.25 0 0 0-2.25-2.25h-15A2.25 2.25 0 0 0 1.5 9.75v6A2.25 2.25 0 0 0 3.75 18Z"}))}const V=r.forwardRef(W);function _({title:t,titleId:c,...u},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":c},u),t?r.createElement("title",{id:c},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const G=r.forwardRef(_);function X({title:t,titleId:c,...u},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":c},u),t?r.createElement("title",{id:c},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const q=r.forwardRef(X);function P({title:t,titleId:c,...u},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":c},u),t?r.createElement("title",{id:c},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const Y=r.forwardRef(P);function J({title:t,titleId:c,...u},o){return r.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":c},u),t?r.createElement("title",{id:c},t):null,r.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const Q=r.forwardRef(J),R=(t=190,c=60)=>{const u=r.useMemo(()=>{const i=t-c,x={name:"Recovery",min:Math.round(c+i*.5),max:Math.round(c+i*.6),color:"#10b981",description:"Active recovery and warm-up"},p={name:"Aerobic",min:Math.round(c+i*.6),max:Math.round(c+i*.7),color:"#3b82f6",description:"Base aerobic training"},g={name:"Threshold",min:Math.round(c+i*.7),max:Math.round(c+i*.8),color:"#f59e0b",description:"Lactate threshold training"},m={name:"Anaerobic",min:Math.round(c+i*.8),max:t,color:"#ef4444",description:"High-intensity intervals"};return{recovery:x,aerobic:p,threshold:g,anaerobic:m}},[t,c]),o=i=>i<=u.recovery.max?"recovery":i<=u.aerobic.max?"aerobic":i<=u.threshold.max?"threshold":"anaerobic";return{zones:u,getZoneForHeartRate:o,getZoneColor:i=>{const x=o(i);return u[x].color},getZoneName:i=>{const x=o(i);return u[x].name}}},ee=t=>{const[c,u]=r.useState("");return r.useEffect(()=>{if(!t){u("");return}const o=()=>{const j=new Date,i=t.startTime,p=(t.endTime||j).getTime()-i.getTime(),g=Math.floor(p/1e3),m=Math.floor(g/60),a=Math.floor(m/60),d=g%60,s=m%60;let n="";a>0?n=`${a}:${s.toString().padStart(2,"0")}:${d.toString().padStart(2,"0")}`:n=`${s}:${d.toString().padStart(2,"0")}`,u(n)};o();let l=null;return t.isActive&&(l=setInterval(o,1e3)),()=>{l&&clearInterval(l)}},[t]),c},te=({rower:t})=>{const{getZoneColor:c,getZoneName:u}=R(),o=t.currentHeartRate?.heartRate,l=o?u(o):"No Data",j=o?c(o):"#6b7280",i=t.currentHeartRate?.timestamp,p=t.deviceId?o?{status:"connected",icon:C,color:"text-green-500"}:{status:"connecting",icon:C,color:"text-yellow-500"}:{status:"disconnected",icon:k,color:"text-gray-400"},g=p.icon;return e.jsxs("article",{className:"heart-rate-card",children:[e.jsxs("header",{className:"heart-rate-card-header",children:[e.jsxs("div",{className:"heart-rate-card-info",children:[e.jsx("h3",{className:"heart-rate-card-name",children:t.name}),e.jsxs("p",{className:"heart-rate-card-seat",children:["Seat ",t.seat]})]}),e.jsxs("div",{className:"heart-rate-card-status",children:[e.jsx(g,{className:`heart-rate-card-status-icon ${p.status==="connected"?"heart-rate-card-status-icon--connected":p.status==="connecting"?"heart-rate-card-status-icon--connecting":"heart-rate-card-status-icon--disconnected"}`}),e.jsx(V,{className:"heart-rate-card-battery-icon"})]})]}),e.jsxs("div",{className:"heart-rate-display",children:[e.jsxs("div",{className:"heart-rate-value-container",children:[e.jsx(A,{className:"heart-rate-icon"}),e.jsx("div",{className:"heart-rate-value",style:{color:j},children:o||"--"}),e.jsx("div",{className:"heart-rate-unit",children:"BPM"})]}),e.jsx("div",{className:"heart-rate-zone-badge",style:{backgroundColor:j},children:l})]}),o&&e.jsxs("div",{className:"heart-rate-zone-progress",children:[e.jsxs("label",{htmlFor:`progress-bar-${t.id}`,className:"heart-rate-zone-labels",children:[e.jsx("span",{children:"Recovery"}),e.jsx("span",{children:"Anaerobic"})]}),e.jsxs("progress",{id:`progress-bar-${t.id}`,className:"heart-rate-progress-bar",max:130,value:o-60,style:{"--zone-color":j},"aria-label":`Heart rate progress: ${o} BPM`,children:[o," BPM"]})]}),e.jsx("div",{className:"heart-rate-last-update",children:i?`Updated ${i.toLocaleTimeString()}`:"No data received"})]})},ne={1:"#ef4444",2:"#3b82f6",3:"#10b981",4:"#f59e0b"},se=r.memo(({data:t,rowers:c,sessionStartTime:u,sessionEndTime:o})=>{const l=r.useMemo(()=>{if(t.length===0)return[];const a=[...t].sort((v,f)=>v.timestamp.getTime()-f.timestamp.getTime()),d=u?.getTime()||a[0].timestamp.getTime(),s=new Map;return a.forEach(v=>{const f=Math.floor((v.timestamp.getTime()-d)/1e3);s.has(f)||s.set(f,{});const N=s.get(f);N[`device_${v.deviceId}`]=v.heartRate,N.timestampStr=v.timestamp.toLocaleTimeString()}),Array.from(s.entries()).sort(([v],[f])=>v-f).map(([v,f])=>({duration:v,...f}))},[t,u?.getTime(),o?.getTime()]),{sessionDuration:j,xAxisTicks:i}=r.useMemo(()=>{if(l.length===0)return{sessionDuration:0,xAxisTicks:[]};let a;o&&u?a=Math.round((o.getTime()-u.getTime())/1e3):a=Math.max(...l.map(h=>h.duration))+1;const d=[0,Math.round(a*.25),Math.round(a*.5),Math.round(a*.75),a],s=[...new Set(d)].sort((n,h)=>n-h);return{sessionDuration:a,xAxisTicks:s}},[l,u,o]),x=r.useMemo(()=>c.filter(a=>a.deviceId&&t.some(d=>d.deviceId===a.deviceId)).sort((a,d)=>a.seat-d.seat),[c,t]),p=({active:a,payload:d})=>!a||!d||d.length===0?null:e.jsxs("article",{className:"heart-rate-tooltip",children:[e.jsxs("p",{className:"heart-rate-tooltip-title",children:["Time: ",d[0]?.payload?.timestampStr]}),d.map(s=>{const n=s.dataKey.replace("device_",""),h=x.find(v=>v.deviceId===n);return!h||s.value===void 0?null:e.jsxs("div",{className:"heart-rate-tooltip-item",children:[e.jsx("div",{className:"heart-rate-tooltip-indicator",style:{backgroundColor:s.color}}),e.jsxs("div",{children:[e.jsxs("p",{className:"heart-rate-tooltip-text",children:[h.name," (Seat ",h.seat,"): ",s.value," BPM"]}),e.jsxs("p",{className:"heart-rate-tooltip-text",children:["Zone: ",s.value<120?"Recovery":s.value<150?"Aerobic":s.value<170?"Threshold":"Anaerobic"]})]})]},s.dataKey)})]}),g=({payload:a})=>{if(!a||a.length===0)return null;const d=a.map(s=>{const n=s.dataKey.replace("device_",""),h=x.find(v=>v.deviceId===n);return{entry:s,rower:h}}).filter(s=>s.rower).sort((s,n)=>s.rower.seat-n.rower.seat);return e.jsx("div",{className:"heart-rate-legend",children:d.map(({entry:s,rower:n})=>e.jsxs("div",{className:"heart-rate-legend-item",children:[e.jsx("div",{className:"heart-rate-legend-indicator",style:{backgroundColor:s.color}}),e.jsxs("span",{className:"heart-rate-legend-text",children:[n.name," (Seat ",n.seat,")"]})]},s.dataKey))})},m=({viewBox:a})=>{const{x:d,y:s,width:n,height:h}=a;return e.jsxs("text",{x:d+n/2,y:s+h,textAnchor:"middle",fontSize:"12",fill:"var(--color-blue-light)",children:["Session Duration: ",j,"s"]})};return l.length===0?e.jsxs("section",{className:"heart-rate-chart",children:[e.jsx("h3",{className:"heart-rate-chart-title",children:"Heart Rate Trend"}),e.jsxs("article",{className:"heart-rate-chart-empty",children:[e.jsx("span",{className:"heart-rate-chart-empty-icon",children:"ðŸ“ˆ"}),e.jsx("p",{className:"heart-rate-chart-empty-text",children:"No session data available"}),e.jsx("p",{className:"heart-rate-chart-empty-subtext",children:"Complete a training session to see heart rate analysis"})]})]}):e.jsxs("section",{className:"heart-rate-chart",children:[e.jsxs("header",{className:"heart-rate-chart-header",children:[e.jsx("h3",{className:"heart-rate-chart-title",children:"Session Analysis"}),e.jsxs("div",{className:"heart-rate-chart-subtitle",children:[x.length," rower",x.length!==1?"s":""," active"]})]}),e.jsx("article",{className:"heart-rate-chart-container",children:e.jsx(E,{width:"100%",height:"100%",children:e.jsxs(F,{data:l,children:[e.jsx(z,{strokeDasharray:"3 3",stroke:"var(--color-blue-light)"}),e.jsx(Z,{dataKey:"duration",tick:{fontSize:11,fill:"var(--color-blue-light)"},tickLine:{stroke:"var(--color-blue-light)"},axisLine:{stroke:"var(--color-blue-light)"},domain:[0,j],scale:"linear",ticks:i,label:e.jsx(m,{})}),e.jsx(B,{domain:[80,200],tick:{fontSize:12,fill:"var(--color-blue-light)"},tickLine:{stroke:"var(--color-blue-light)"},axisLine:{stroke:"var(--color-blue-light)"}}),e.jsx(U,{content:e.jsx(p,{})}),e.jsx(O,{content:e.jsx(g,{})}),x.map(a=>e.jsx(K,{type:"monotone",dataKey:`device_${a.deviceId}`,stroke:ne[a.seat]||"#6b7280",strokeWidth:2,name:`${a.name} (Seat ${a.seat})`,connectNulls:!1,dot:!1,activeDot:{r:5,strokeWidth:2},animationDuration:1e3,animationEasing:"ease-out",isAnimationActive:!0},a.deviceId))]})})})]})},(t,c)=>t.data===c.data&&t.rowers===c.rowers&&t.sessionStartTime?.getTime()===c.sessionStartTime?.getTime()&&t.sessionEndTime?.getTime()===c.sessionEndTime?.getTime()),T=()=>{const[t,c]=r.useState(new Map),[u,o]=r.useState(!1),l=H.getInstance(),{connectionStatus:j}=b(),i=r.useCallback(()=>{const n=new Map,h=l.getAllConnectionHealth();for(const[v,f]of h){const N=Date.now()-f.lastHeartbeat.getTime(),$=l.isConnectionHealthy(v);n.set(v,{deviceId:v,isHealthy:$,lastHeartbeat:f.lastHeartbeat,timeSinceLastHeartbeat:N})}c(n)},[l]),x=r.useCallback(()=>{o(!0),l.startConnectionHealthMonitoring();const n=setInterval(i,5e3);return()=>{clearInterval(n),l.stopConnectionHealthMonitoring(),o(!1)}},[l,i]),p=r.useCallback(()=>{l.stopConnectionHealthMonitoring(),o(!1)},[l]),g=r.useCallback(n=>t.get(n),[t]),m=r.useCallback(()=>Array.from(t.values()).filter(n=>!n.isHealthy),[t]),a=r.useCallback(()=>{const n=t.size,h=Array.from(t.values()).filter(f=>f.isHealthy).length,v=n-h;return{total:n,healthy:h,unhealthy:v,healthPercentage:n>0?Math.round(h/n*100):100}},[t]),d=r.useMemo(()=>{const n=new Map;for(const[h,v]of t)v.isHealthy?n.set(h,{status:"healthy",color:"green"}):n.set(h,{status:"unhealthy",color:"red"});return n},[t]),s=r.useCallback(n=>d.get(n)||{status:"unknown",color:"gray"},[d]);return r.useEffect(()=>{if(j.connectedDevices.length>0){l.startConnectionHealthMonitoring(),i();const h=setInterval(i,5e3);return()=>{clearInterval(h),l.stopConnectionHealthMonitoring()}}else l.stopConnectionHealthMonitoring()},[j.connectedDevices.length,l,i]),r.useEffect(()=>{o(j.connectedDevices.length>0)},[j.connectedDevices.length]),{connectionHealth:t,isMonitoring:u,startMonitoring:x,stopMonitoring:p,getDeviceHealth:g,getDeviceHealthStatus:s,getUnhealthyConnections:m,getHealthSummary:a,updateHealthData:i}},ae=()=>{const{connectionStatus:t}=b(),{getHealthSummary:c,getUnhealthyConnections:u}=T(),{isScanning:o,connectedDevices:l,availableDevices:j,hasSpeedCoachConflicts:i,conflicts:x}=t,p=c(),g=u(),m=()=>i?w:g.length>0?M:l.length>0?S:o?I:k,a=()=>i?"SpeedCoach conflicts detected":g.length>0?`${g.length} connection(s) unhealthy`:l.length>0?`${l.length} device(s) connected (${p.healthPercentage}% healthy)`:o?"Scanning for devices...":"No devices connected",d=m();return e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"connection-status-content",children:[e.jsxs("article",{className:"connection-status-info",children:[e.jsx(d,{className:`connection-status-icon ${i?"connection-status-icon--conflict":g.length>0?"connection-status-icon--unhealthy":l.length>0?"connection-status-icon--connected":o?"connection-status-icon--scanning":"connection-status-icon--disconnected"}`}),e.jsxs("div",{children:[e.jsx("p",{className:`connection-status-text ${i?"connection-status-text--conflict":g.length>0?"connection-status-text--unhealthy":l.length>0?"connection-status-text--connected":o?"connection-status-text--scanning":"connection-status-text--disconnected"}`,children:a()}),j.length>0&&e.jsxs("p",{className:"connection-status-subtitle",children:[j.length," device(s) available"]})]})]}),l.length>0&&e.jsx("ul",{className:"connection-device-list",children:l.map(s=>{const n=s.isHealthy!==!1;return e.jsxs("li",{className:`connection-device-item ${n?"connection-device-item--healthy":"connection-device-item--unhealthy"}`,children:[e.jsx("div",{className:`connection-device-indicator ${n?"connection-device-indicator--healthy":"connection-device-indicator--unhealthy"}`}),e.jsx("p",{className:`connection-device-name ${n?"connection-device-name--healthy":"connection-device-name--unhealthy"}`,children:s.name})]},s.id)})})]}),g.length>0&&e.jsx("section",{className:"connection-issues",children:e.jsxs("article",{className:"connection-issue",children:[e.jsx(M,{className:"connection-issue-icon connection-issue-icon--error"}),e.jsxs("div",{className:"connection-issue-content",children:[e.jsx("p",{className:"connection-issue-title connection-issue-title--error",children:"Unhealthy connections detected:"}),e.jsx("ul",{className:"connection-issue-list",children:g.map(s=>e.jsxs("li",{className:"connection-issue-item connection-issue-item--error",children:["â€¢ Device ",s.deviceId," - Last heartbeat: ",Math.round(s.timeSinceLastHeartbeat/1e3),"s ago"]},s.deviceId))})]})]})}),i&&x.length>0&&e.jsx("section",{className:"connection-issues",children:e.jsxs("article",{className:"connection-issue",children:[e.jsx(w,{className:"connection-issue-icon connection-issue-icon--warning"}),e.jsxs("div",{className:"connection-issue-content",children:[e.jsx("p",{className:"connection-issue-title connection-issue-title--warning",children:"Connection conflicts detected:"}),e.jsx("ul",{className:"connection-issue-list",children:x.map(s=>e.jsxs("li",{className:"connection-issue-item connection-issue-item--warning",children:["â€¢ ",s.deviceName," is connected to SpeedCoach"]},s.deviceId))})]})]})})]})},ce=()=>{const{connectionStatus:t}=b(),{attemptReconnection:c}=L(),{getUnhealthyConnections:u}=T(),[o,l]=r.useState(new Map),[j,i]=r.useState(new Map),x=u(),p=async m=>{l(a=>new Map(a).set(m,!0));try{const a=await c(m);i(d=>new Map(d).set(m,a)),setTimeout(()=>{i(d=>{const s=new Map(d);return s.delete(m),s})},3e3)}catch(a){console.error("Manual reconnection failed:",a),i(d=>new Map(d).set(m,!1))}finally{l(a=>{const d=new Map(a);return d.delete(m),d})}},g=async()=>{for(const m of x)await p(m.deviceId)};return x.length===0?null:e.jsxs("section",{className:"card-base reconnection-status",children:[e.jsxs("article",{className:"reconnection-status-header",children:[e.jsxs("div",{className:"reconnection-status-title",children:[e.jsx(w,{className:"reconnection-status-icon"}),e.jsx("h3",{className:"reconnection-status-text",children:"Connection Issues Detected"})]}),x.length>1&&e.jsx("div",{className:"reconnection-status-actions",children:e.jsxs("button",{onClick:g,className:"btn btn-secondary",style:{color:"var(--status-error)",borderColor:"var(--status-error)"},children:[e.jsx(y,{className:"reconnection-icon"}),"Reconnect All"]})})]}),e.jsx("ul",{className:"reconnection-device-list",children:x.map(m=>{const a=o.get(m.deviceId),d=j.get(m.deviceId),s=t.connectedDevices.find(n=>n.id===m.deviceId);return e.jsxs("li",{className:"reconnection-device-item",children:[e.jsxs("div",{className:"reconnection-device-info",children:[e.jsx("div",{className:"reconnection-device-indicator"}),e.jsxs("div",{className:"reconnection-device-details",children:[e.jsx("p",{className:"reconnection-device-name",children:s?.name||`Device ${m.deviceId}`}),e.jsxs("p",{className:"reconnection-device-timeout",children:["Last heartbeat: ",Math.round(m.timeSinceLastHeartbeat/1e3),"s ago"]})]})]}),e.jsxs("div",{className:"reconnection-device-actions",children:[d===!0&&e.jsxs("div",{className:"reconnection-result reconnection-result--success",children:[e.jsx(S,{className:"reconnection-result-icon"}),e.jsx("span",{className:"reconnection-result-text",children:"Reconnected"})]}),d===!1&&e.jsxs("div",{className:"reconnection-result reconnection-result--failure",children:[e.jsx(Q,{className:"reconnection-result-icon"}),e.jsx("span",{className:"reconnection-result-text",children:"Failed"})]}),e.jsx("button",{onClick:()=>p(m.deviceId),disabled:a,className:"reconnection-button",children:a?e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"reconnection-button-icon reconnection-button-icon--spinning"}),"Reconnecting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(y,{className:"reconnection-button-icon"}),"Reconnect"]})})]})]},m.deviceId)})})]})},oe=()=>!1,re=()=>oe(),ie=()=>{const{rowers:t,currentSession:c,startSession:u,endSession:o,updateHeartRate:l,addRower:j,removeAllRowers:i,setConnectionStatus:x,addConnectedDevice:p,removeAllConnectedDevices:g,clearHeartRateData:m}=b(),[a,d]=r.useState(re()),[s,n]=r.useState(null),[h,v]=r.useState(!1);return null},xe=()=>{const{currentSession:t,rowers:c,connectionStatus:u,startSession:o,endSession:l,setUIState:j,getUnhealthyDevices:i}=b(),{zones:x}=R(),p=ee(t),g=t?.isActive,m=i(),a=()=>{if(c.length===0){j({currentView:"setup"});return}const n={id:`session-${Date.now()}`,startTime:new Date,rowers:c,heartRateData:[],isActive:!0};o(n)},d=()=>{l()},s=c.filter(n=>n.deviceId&&n.currentHeartRate);return e.jsxs(e.Fragment,{children:[e.jsx(ie,{}),e.jsxs("section",{className:"session-controls",children:[e.jsxs("article",{className:"session-info",children:[e.jsx("h2",{className:"session-title",children:"Training Session"}),e.jsx("p",{className:"session-subtitle",children:g?`Started ${t?.startTime.toLocaleTimeString()}`:t&&!g?`Session ended - Duration: ${p}`:"Ready to start monitoring"}),g&&e.jsxs("div",{className:"session-status",children:[e.jsxs("p",{className:"status-indicator",children:[e.jsx(S,{className:"status-icon"}),e.jsxs("span",{className:"status-text status-text--success",children:[s.length," rower(s) active"]})]}),e.jsx("p",{className:"status-indicator",children:e.jsxs("span",{className:"status-text status-text--info",children:["Duration: ",p]})}),m.length>0&&e.jsxs("p",{className:"status-indicator",children:[e.jsx(w,{className:"status-icon"}),e.jsxs("span",{className:"status-text status-text--error",children:[m.length," connection(s) unhealthy"]})]})]})]}),e.jsxs("article",{className:"session-actions",children:[g?e.jsxs("button",{onClick:d,className:"btn btn-danger",children:[e.jsx(Y,{className:"btn-icon"}),"End Session"]}):e.jsxs("button",{onClick:a,disabled:u.connectedDevices.length===0,className:"btn btn-primary",children:[e.jsx(q,{className:"btn-icon"}),"Start Session"]}),e.jsxs("button",{onClick:()=>j({currentView:"setup"}),className:"btn btn-secondary",children:[e.jsx(D,{className:"btn-icon"}),"Add Rower"]})]})]}),e.jsx(ae,{}),e.jsx(ce,{}),c.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("section",{className:"rower-overview",children:[e.jsx("h3",{className:"rower-overview-title",children:"Rower Status"}),e.jsx("article",{className:"rower-grid",children:[1,2,3,4].map(n=>{const h=c.find(N=>N.seat===n),v=h&&h.deviceId&&h.currentHeartRate,f=h&&h.deviceId;return e.jsxs("div",{className:`rower-seat ${v?"rower-seat--connected":f?"rower-seat--device-only":"rower-seat--empty"}`,children:[e.jsx("span",{className:`rower-status-indicator ${v?"rower-status-indicator--connected":f?"rower-status-indicator--device-only":"rower-status-indicator--empty"}`}),e.jsxs("p",{className:"rower-seat-number",children:["Seat ",n]}),e.jsx("p",{className:"rower-name",children:h?h.name:"Empty"}),e.jsx("p",{className:"rower-status",children:v?"Active":f?"Connected":"No Device"})]},n)})})]}),s.length>0&&e.jsx("section",{className:"heart-rate-grid",children:s.map(n=>e.jsx(te,{rower:n,zones:x},n.id))}),t&&!t.isActive&&t.finalHeartRateData&&t.finalHeartRateData.length>0&&e.jsx(se,{data:t.finalHeartRateData,rowers:t.rowers,sessionStartTime:t.startTime,sessionEndTime:t.endTime})]}):e.jsxs("section",{className:"card-base empty-state",children:[e.jsx(G,{className:"empty-state-icon"}),e.jsx("h3",{className:"empty-state-title",children:"No heart rate data"}),e.jsx("p",{className:"empty-state-description",children:"Connect heart rate devices and assign them to rowers to start monitoring."}),e.jsx("div",{className:"empty-state-action",children:e.jsxs("button",{onClick:()=>j({currentView:"setup"}),className:"btn btn-primary",children:[e.jsx(D,{className:"btn-icon"}),"Setup Devices"]})})]}),e.jsxs("section",{className:"card-base heart-rate-zones",children:[e.jsx("h3",{className:"heart-rate-zones-title",children:"Heart Rate Zones"}),e.jsx("article",{className:"heart-rate-zones-grid",children:Object.entries(x).map(([n,h])=>e.jsxs("div",{className:"heart-rate-zone-item",children:[e.jsx("span",{className:`heart-rate-zone-color ${h.name.toLowerCase()}`}),e.jsx("p",{className:"heart-rate-zone-name",children:h.name}),e.jsxs("p",{className:"heart-rate-zone-range",children:[h.min,"-",h.max," BPM"]})]},n))})]})]})};export{xe as Dashboard};
