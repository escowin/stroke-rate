import{j as e,F as w,a as j,b as g,u as p,c as f,d as y,e as b}from"./index-BG4ZKVFQ.js";import{r as o,b as N,L as k,C,X as S,Y as R,T as M,c as L}from"./charts-ZcoGu2ra.js";import"./react-vendor-gH-7aFTg.js";import"./utils-g_oTUWk5.js";import"./ui-vendor-D9cSJSe6.js";function E({title:s,titleId:t,...r},a){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?o.createElement("title",{id:t},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 10.5h.375c.621 0 1.125.504 1.125 1.125v2.25c0 .621-.504 1.125-1.125 1.125H21M3.75 18h15A2.25 2.25 0 0 0 21 15.75v-6a2.25 2.25 0 0 0-2.25-2.25h-15A2.25 2.25 0 0 0 1.5 9.75v6A2.25 2.25 0 0 0 3.75 18Z"}))}const $=o.forwardRef(E);function A({title:s,titleId:t,...r},a){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?o.createElement("title",{id:t},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 13.125C3 12.504 3.504 12 4.125 12h2.25c.621 0 1.125.504 1.125 1.125v6.75C7.5 20.496 6.996 21 6.375 21h-2.25A1.125 1.125 0 0 1 3 19.875v-6.75ZM9.75 8.625c0-.621.504-1.125 1.125-1.125h2.25c.621 0 1.125.504 1.125 1.125v11.25c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V8.625ZM16.5 4.125c0-.621.504-1.125 1.125-1.125h2.25C20.496 3 21 3.504 21 4.125v15.75c0 .621-.504 1.125-1.125 1.125h-2.25a1.125 1.125 0 0 1-1.125-1.125V4.125Z"}))}const Z=o.forwardRef(A);function D({title:s,titleId:t,...r},a){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?o.createElement("title",{id:t},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12.75 11.25 15 15 9.75M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"}))}const T=o.forwardRef(D);function F({title:s,titleId:t,...r},a){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?o.createElement("title",{id:t},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 5.653c0-.856.917-1.398 1.667-.986l11.54 6.347a1.125 1.125 0 0 1 0 1.972l-11.54 6.347a1.125 1.125 0 0 1-1.667-.986V5.653Z"}))}const B=o.forwardRef(F);function z({title:s,titleId:t,...r},a){return o.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:a,"aria-labelledby":t},r),s?o.createElement("title",{id:t},s):null,o.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 7.5A2.25 2.25 0 0 1 7.5 5.25h9a2.25 2.25 0 0 1 2.25 2.25v9a2.25 2.25 0 0 1-2.25 2.25h-9a2.25 2.25 0 0 1-2.25-2.25v-9Z"}))}const W=o.forwardRef(z),v=(s=190,t=60)=>{const r=o.useMemo(()=>{const n=s-t,d={name:"Recovery",min:Math.round(t+n*.5),max:Math.round(t+n*.6),color:"#10b981",description:"Active recovery and warm-up"},x={name:"Aerobic",min:Math.round(t+n*.6),max:Math.round(t+n*.7),color:"#3b82f6",description:"Base aerobic training"},h={name:"Threshold",min:Math.round(t+n*.7),max:Math.round(t+n*.8),color:"#f59e0b",description:"Lactate threshold training"},l={name:"Anaerobic",min:Math.round(t+n*.8),max:s,color:"#ef4444",description:"High-intensity intervals"};return{recovery:d,aerobic:x,threshold:h,anaerobic:l}},[s,t]),a=n=>n<=r.recovery.max?"recovery":n<=r.aerobic.max?"aerobic":n<=r.threshold.max?"threshold":"anaerobic";return{zones:r,getZoneForHeartRate:a,getZoneColor:n=>{const d=a(n);return r[d].color},getZoneName:n=>{const d=a(n);return r[d].name}}},I=({rower:s})=>{const{getZoneColor:t,getZoneName:r}=v(),a=s.currentHeartRate?.heartRate,c=a?r(a):"No Data",i=a?t(a):"#6b7280",n=s.currentHeartRate?.timestamp,x=s.deviceId?a?{status:"connected",icon:g,color:"text-green-500"}:{status:"connecting",icon:g,color:"text-yellow-500"}:{status:"disconnected",icon:j,color:"text-gray-400"},h=x.icon;return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:s.name}),e.jsxs("p",{className:"text-sm text-gray-500",children:["Seat ",s.seat]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(h,{className:`h-5 w-5 ${x.color}`}),e.jsx($,{className:"h-5 w-5 text-gray-400"})]})]}),e.jsxs("div",{className:"text-center mb-4",children:[e.jsxs("div",{className:"flex items-center justify-center mb-2",children:[e.jsx(w,{className:"h-8 w-8 text-red-500 mr-2"}),e.jsx("div",{className:"text-4xl font-bold",style:{color:i},children:a||"--"}),e.jsx("div",{className:"text-sm text-gray-500 ml-2",children:"BPM"})]}),e.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium text-white",style:{backgroundColor:i},children:c})]}),a&&e.jsxs("div",{className:"mb-4",children:[e.jsxs("div",{className:"flex justify-between text-xs text-gray-500 mb-1",children:[e.jsx("span",{children:"Recovery"}),e.jsx("span",{children:"Anaerobic"})]}),e.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:e.jsx("div",{className:"h-2 rounded-full transition-all duration-300",style:{backgroundColor:i,width:`${Math.min(100,(a-60)/130*100)}%`}})})]}),e.jsx("div",{className:"text-xs text-gray-400 text-center",children:n?`Updated ${n.toLocaleTimeString()}`:"No data received"})]})},O=({data:s,maxDataPoints:t=50})=>{const r=o.useMemo(()=>s.slice(-t).map((i,n)=>({time:n,heartRate:i.heartRate,zone:i.zone,timestamp:i.timestamp.toLocaleTimeString()})),[s,t]),a=({active:c,payload:i})=>{if(c&&i&&i.length){const n=i[0].payload;return e.jsxs("div",{className:"bg-white p-3 border border-gray-200 rounded-lg shadow-lg",children:[e.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["Heart Rate: ",n.heartRate," BPM"]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Zone: ",n.zone]}),e.jsxs("p",{className:"text-xs text-gray-500",children:["Time: ",n.timestamp]})]})}return null};return r.length===0?e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Heart Rate Trend"}),e.jsx("div",{className:"flex items-center justify-center h-64 text-gray-500",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-4xl mb-2",children:"ðŸ“ˆ"}),e.jsx("p",{children:"No heart rate data available"}),e.jsx("p",{className:"text-sm",children:"Connect a device to see real-time trends"})]})})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Heart Rate Trend"}),e.jsx("div",{className:"h-64",children:e.jsx(N,{width:"100%",height:"100%",children:e.jsxs(k,{data:r,children:[e.jsx(C,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),e.jsx(S,{dataKey:"time",tick:!1,tickLine:{stroke:"#d1d5db"},axisLine:{stroke:"#d1d5db"},label:{value:"Time",position:"outsideBottom",offset:10,style:{textAnchor:"middle",fontSize:12,fill:"#6b7280"}}}),e.jsx(R,{domain:[60,200],tick:{fontSize:12},tickLine:{stroke:"#d1d5db"},axisLine:{stroke:"#d1d5db"}}),e.jsx(M,{content:e.jsx(a,{})}),e.jsx(L,{type:"monotone",dataKey:"heartRate",stroke:"#3b82f6",strokeWidth:2,dot:{fill:"#3b82f6",strokeWidth:2,r:4},activeDot:{r:6,stroke:"#3b82f6",strokeWidth:2}})]})})})]})},V=()=>{const{connectionStatus:s}=p(),{isScanning:t,connectedDevices:r,availableDevices:a,hasSpeedCoachConflicts:c,conflicts:i}=s,n=()=>c?"text-yellow-600":r.length>0?"text-green-600":t?"text-blue-600":"text-gray-600",d=()=>c?f:r.length>0?T:t?y:j,x=()=>c?"SpeedCoach conflicts detected":r.length>0?`${r.length} device(s) connected`:t?"Scanning for devices...":"No devices connected",h=d();return e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsx(h,{className:`h-5 w-5 ${n()}`}),e.jsxs("div",{children:[e.jsx("p",{className:`text-sm font-medium ${n()}`,children:x()}),a.length>0&&e.jsxs("p",{className:"text-xs text-gray-500",children:[a.length," device(s) available"]})]})]}),r.length>0&&e.jsx("div",{className:"flex space-x-2",children:r.map(l=>e.jsxs("div",{className:"flex items-center space-x-1 px-2 py-1 bg-green-100 rounded-full",children:[e.jsx("div",{className:"w-2 h-2 bg-green-500 rounded-full"}),e.jsx("span",{className:"text-xs text-green-700 font-medium",children:l.name})]},l.id))})]}),c&&i.length>0&&e.jsx("div",{className:"mt-3 pt-3 border-t border-gray-200",children:e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(f,{className:"h-4 w-4 text-yellow-500 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-yellow-800 font-medium",children:"Connection conflicts detected:"}),e.jsx("ul",{className:"mt-1 text-yellow-700",children:i.map(l=>e.jsxs("li",{className:"text-xs",children:["â€¢ ",l.deviceName," is connected to SpeedCoach"]},l.deviceId))})]})]})})]})},Y=()=>{const{currentSession:s,rowers:t,connectionStatus:r,startSession:a,endSession:c,setUIState:i}=p(),{zones:n}=v(),d=s?.isActive,x=()=>{if(t.length===0){i({currentView:"setup"});return}const m={id:`session-${Date.now()}`,startTime:new Date,rowers:t,heartRateData:[],isActive:!0};a(m)},h=()=>{c()},l=t.filter(m=>m.deviceId&&m.currentHeartRate);return e.jsxs("div",{className:"space-y-6",children:[e.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Training Session"}),e.jsx("p",{className:"text-sm text-gray-600",children:d?`Started ${s?.startTime.toLocaleTimeString()}`:"Ready to start monitoring"})]}),e.jsxs("div",{className:"flex space-x-3",children:[d?e.jsxs("button",{onClick:h,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-red-600 hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:[e.jsx(W,{className:"h-4 w-4 mr-2"}),"End Session"]}):e.jsxs("button",{onClick:x,disabled:r.connectedDevices.length===0,className:"inline-flex items-center px-4 py-2 border border-transparent text-sm font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500 disabled:opacity-50 disabled:cursor-not-allowed",children:[e.jsx(B,{className:"h-4 w-4 mr-2"}),"Start Session"]}),e.jsxs("button",{onClick:()=>i({currentView:"setup"}),className:"inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md shadow-sm text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Add Rower"]})]})]})}),e.jsx(V,{}),l.length>0?e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:l.map(m=>e.jsx(I,{rower:m,zones:n},m.id))}),s&&s.heartRateData.length>0&&e.jsx(O,{data:s.heartRateData})]}):e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[e.jsx(Z,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No heart rate data"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Connect heart rate devices and assign them to rowers to start monitoring."}),e.jsx("div",{className:"mt-6",children:e.jsxs("button",{onClick:()=>i({currentView:"setup"}),className:"inline-flex items-center px-4 py-2 border border-transparent shadow-sm text-sm font-medium rounded-md text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500",children:[e.jsx(b,{className:"h-4 w-4 mr-2"}),"Setup Devices"]})})]}),e.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Heart Rate Zones"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:Object.entries(n).map(([m,u])=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-full h-4 rounded mb-2",style:{backgroundColor:u.color}}),e.jsx("div",{className:"text-sm font-medium text-gray-900",children:u.name}),e.jsxs("div",{className:"text-xs text-gray-500",children:[u.min,"-",u.max," BPM"]})]},m))})]})]})};export{Y as Dashboard};
