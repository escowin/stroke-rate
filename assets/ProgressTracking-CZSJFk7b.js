import{j as e,c as E,d as b,e as P}from"./index-BKQi3Haz.js";import{r as a,c as y,L as H,C as O,X as K,Y as W,T as C,e as j,P as G,f as Z,g as B}from"./charts-BpM2RLF_.js";import{b as X,a as Y,F as U}from"./sessionAnalytics-aaUY-49P.js";import{g as V,F as _}from"./progressTracking-2kONbrC3.js";import{F as p,a as S}from"./LightBulbIcon-DBE7d1nF.js";import"./react-vendor-gH-7aFTg.js";import"./utils-DFjofOtR.js";import"./ui-vendor-D6OEOlG4.js";function q({title:c,titleId:i,...d},o){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":i},d),c?a.createElement("title",{id:i},c):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M2.25 6 9 12.75l4.286-4.286a11.948 11.948 0 0 1 4.306 6.43l.776 2.898m0 0 3.182-5.511m-3.182 5.51-5.511-3.181"}))}const J=a.forwardRef(q);function Q({title:c,titleId:i,...d},o){return a.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:o,"aria-labelledby":i},d),c?a.createElement("title",{id:i},c):null,a.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3 3v1.5M3 21v-6m0 0 2.77-.693a9 9 0 0 1 6.208.682l.108.054a9 9 0 0 0 6.086.71l3.114-.732a48.524 48.524 0 0 1-.005-10.499l-3.11.732a9 9 0 0 1-6.085-.711l-.108-.054a9 9 0 0 0-6.208-.682L3 4.5M3 15V4.5"}))}const k=a.forwardRef(Q),oe=({className:c=""})=>{const{sessions:i}=X(),{zones:d}=Y(),[o,D]=a.useState(30),[$,L]=a.useState(null),[v,T]=a.useState(!1),[N,F]=a.useState(!1),u=a.useMemo(()=>{const s=V(i,d,[],[],o);return console.log("Progress Report Debug:",{totalSessions:i.length,sessionsWithData:i.filter(r=>r.finalHeartRateData&&r.finalHeartRateData.length>0).length,individualProgress:s.individualProgress.length,firstRowerTrends:s.individualProgress[0]?.trends?.map(r=>({metric:r.metric,changeRate:r.changeRate,confidence:r.confidence,direction:r.direction}))}),s},[i,d,o]),{crewProgress:n,individualProgress:m,insights:l}=u,M=a.useMemo(()=>n.synchronizationTrend.trendData.map((r,t)=>({date:r.date.toLocaleDateString(),synchronization:r.value,performance:n.performanceTrend.trendData[t]?.value||0,cohesion:n.cohesionTrend.trendData[t]?.value||0})),[n]),w=a.useMemo(()=>{const s=i.filter(t=>t.finalHeartRateData&&t.finalHeartRateData.length>0).slice(-5);if(s.length===0)return[];const r={recovery:0,aerobic:0,threshold:0,anaerobic:0};return s.forEach(t=>{t.finalHeartRateData.forEach(x=>{const h=x.zone;h in r&&r[h]++})}),Object.entries(r).map(([t,g])=>({zone:t.charAt(0).toUpperCase()+t.slice(1),count:g,percentage:Math.round(g/Object.values(r).reduce((x,h)=>x+h,0)*100)}))},[i]),I=s=>{switch(s){case"improving":return e.jsx(p,{className:"w-4 h-4 text-green-600"});case"declining":return e.jsx(J,{className:"w-4 h-4 text-red-600"});default:return e.jsx("div",{className:"w-4 h-4 bg-gray-400 rounded-full"})}},z=s=>{switch(s){case"improving":return"text-green-600";case"declining":return"text-red-600";default:return"text-gray-600"}},f=s=>s>=80?"text-green-600":s>=60?"text-yellow-600":"text-red-600",A=s=>({"metrics.avgHeartRate":"Average Heart Rate","metrics.maxHeartRate":"Max Heart Rate","metrics.trimp":"TRIMP Score","metrics.consistencyScore":"Consistency","metrics.effortScore":"Effort Level",crewSynchronization:"Crew Synchronization",crewCohesion:"Crew Cohesion",performanceScore:"Performance Score"})[s]||s.replace("metrics.","").replace(/([A-Z])/g," $1").trim(),R=["#10b981","#3b82f6","#f59e0b","#ef4444"];return e.jsxs("div",{className:`progress-tracking ${c}`,children:[e.jsx("section",{className:"card-base progress-header",children:e.jsxs("div",{className:"progress-header-content",children:[e.jsxs("h2",{className:"progress-header-title",children:[e.jsx(p,{className:"progress-header-icon"}),"Progress Tracking"]}),e.jsxs("div",{className:"progress-header-controls",children:[e.jsxs("div",{className:"period-selector",children:[e.jsx("label",{className:"period-selector-label",children:"Time Period:"}),e.jsxs("select",{value:o,onChange:s=>D(Number(s.target.value)),className:"period-selector-select",children:[e.jsx("option",{value:7,children:"Last 7 days"}),e.jsx("option",{value:30,children:"Last 30 days"}),e.jsx("option",{value:90,children:"Last 90 days"}),e.jsx("option",{value:180,children:"Last 6 months"})]})]}),e.jsxs("div",{className:"view-toggles",children:[e.jsxs("button",{className:`view-toggle ${v?"active":""}`,onClick:()=>T(!v),children:[e.jsx(k,{className:"view-toggle-icon"}),"Goals"]}),e.jsxs("button",{className:`view-toggle ${N?"active":""}`,onClick:()=>F(!N),children:[e.jsx(_,{className:"view-toggle-icon"}),"Phases"]})]})]})]})}),e.jsxs("section",{className:"card-base progress-overview",children:[e.jsxs("h3",{className:"card-title",children:[e.jsx(E,{className:"card-title-icon"}),"Progress Overview"]}),e.jsxs("div",{className:"progress-overview-grid",children:[e.jsxs("div",{className:"progress-metric",children:[e.jsxs("div",{className:"progress-metric-header",children:[e.jsx("span",{className:"progress-metric-label",children:"Crew Progress"}),e.jsxs("span",{className:`progress-metric-value ${f(n.overallProgress)}`,children:[n.overallProgress,"%"]})]}),e.jsx("progress",{className:"progress-metric-progress",value:n.overallProgress,max:100,"aria-label":`Crew progress: ${n.overallProgress}%`})]}),e.jsx("div",{className:"progress-metric",children:e.jsxs("div",{className:"progress-metric-header",children:[e.jsx("span",{className:"progress-metric-label",children:"Sessions Completed"}),e.jsx("span",{className:"progress-metric-value",children:u.totalSessions})]})}),e.jsx("div",{className:"progress-metric",children:e.jsxs("div",{className:"progress-metric-header",children:[e.jsx("span",{className:"progress-metric-label",children:"Improving Rowers"}),e.jsxs("span",{className:"progress-metric-value",children:[m.filter(s=>s.overallProgress>70).length,"/",m.length]})]})})]})]}),e.jsxs("section",{className:"card-base trend-charts",children:[e.jsxs("h3",{className:"card-title",children:[e.jsx(p,{className:"card-title-icon"}),"Performance Trends"]}),e.jsxs("div",{className:"trend-charts-content",children:[e.jsxs("div",{className:"trend-chart",children:[e.jsx("h4",{className:"trend-chart-title",children:"Crew Metrics Over Time"}),e.jsx("div",{className:"trend-chart-container",children:e.jsx(y,{width:"100%",height:300,children:e.jsxs(H,{data:M,children:[e.jsx(O,{strokeDasharray:"3 3"}),e.jsx(K,{dataKey:"date"}),e.jsx(W,{}),e.jsx(C,{}),e.jsx(j,{type:"monotone",dataKey:"synchronization",stroke:"#3b82f6",strokeWidth:2,name:"Synchronization"}),e.jsx(j,{type:"monotone",dataKey:"performance",stroke:"#10b981",strokeWidth:2,name:"Performance"}),e.jsx(j,{type:"monotone",dataKey:"cohesion",stroke:"#f59e0b",strokeWidth:2,name:"Cohesion"})]})})})]}),e.jsxs("div",{className:"trend-chart",children:[e.jsx("h4",{className:"trend-chart-title",children:"Zone Distribution (Last 5 Sessions)"}),e.jsx("div",{className:"trend-chart-container",children:e.jsx(y,{width:"100%",height:300,children:e.jsxs(G,{children:[e.jsx(Z,{data:w,cx:"50%",cy:"50%",labelLine:!1,label:({zone:s,percentage:r})=>`${s} ${r}%`,outerRadius:80,fill:"#8884d8",dataKey:"count",children:w.map((s,r)=>e.jsx(B,{fill:R[r%R.length]},`cell-${r}`))}),e.jsx(C,{})]})})})]})]})]}),e.jsxs("section",{className:"card-base individual-progress",children:[e.jsxs("h3",{className:"card-title",children:[e.jsx(U,{className:"card-title-icon"}),"Individual Rower Progress"]}),e.jsxs("div",{className:"individual-progress-content",children:[e.jsxs("div",{className:"rower-selector",children:[e.jsx("label",{className:"rower-selector-label",children:"Select Rower:"}),e.jsxs("select",{value:$||"",onChange:s=>L(s.target.value||null),className:"rower-selector-select",children:[e.jsx("option",{value:"",children:"All Rowers"}),m.map(s=>e.jsxs("option",{value:s.rowerId,children:[s.rowerName," (Seat ",s.seat,")"]},s.rowerId))]})]}),e.jsx("div",{className:"individual-progress-grid",children:m.map(s=>e.jsxs("div",{className:"rower-progress-card",children:[e.jsxs("div",{className:"rower-progress-header",children:[e.jsx("h4",{className:"rower-progress-name",children:s.rowerName}),e.jsxs("span",{className:"rower-progress-seat",children:["Seat ",s.seat]})]}),e.jsxs("div",{className:"rower-progress-metrics",children:[e.jsxs("div",{className:"rower-progress-metric",children:[e.jsx("span",{className:"rower-progress-metric-label",children:"Overall Progress"}),e.jsx("div",{className:"rower-progress-metric-value",children:e.jsxs("span",{className:`rower-progress-score ${f(s.overallProgress)}`,children:[s.overallProgress,"%"]})})]}),e.jsx("div",{className:"rower-progress-trends",children:s.trends.slice(0,3).map(r=>e.jsxs("div",{className:"rower-trend-item",children:[e.jsxs("div",{className:"rower-trend-header",children:[e.jsx("span",{className:"rower-trend-metric",children:A(r.metric)}),I(r.direction)]}),e.jsxs("div",{className:"rower-trend-details",children:[e.jsxs("span",{className:`rower-trend-rate ${z(r.direction)}`,children:[r.changeRate>0?"+":"",r.changeRate,"%/week"]}),e.jsxs("span",{className:"rower-trend-confidence",children:[r.confidence,"% confidence"]})]})]},r.metric))})]}),s.strengths.length>0&&e.jsxs("div",{className:"rower-strengths",children:[e.jsx("h5",{className:"rower-strengths-title",children:"Strengths"}),e.jsx("ul",{className:"rower-strengths-list",children:s.strengths.map((r,t)=>e.jsxs("li",{className:"rower-strength-item",children:[e.jsx(b,{className:"rower-strength-icon"}),r]},t))})]}),s.improvementAreas.length>0&&e.jsxs("div",{className:"rower-improvements",children:[e.jsx("h5",{className:"rower-improvements-title",children:"Areas for Improvement"}),e.jsx("ul",{className:"rower-improvements-list",children:s.improvementAreas.map((r,t)=>e.jsxs("li",{className:"rower-improvement-item",children:[e.jsx(P,{className:"rower-improvement-icon"}),r]},t))})]})]},s.rowerId))})]})]}),e.jsxs("section",{className:"card-base progress-insights",children:[e.jsxs("h3",{className:"card-title",children:[e.jsx(S,{className:"card-title-icon"}),"Insights & Recommendations"]}),e.jsxs("div",{className:"progress-insights-content",children:[l.keyImprovements.length>0&&e.jsxs("div",{className:"insight-section",children:[e.jsxs("h4",{className:"insight-section-title",children:[e.jsx(b,{className:"insight-section-icon"}),"Key Improvements"]}),e.jsx("ul",{className:"insight-list",children:l.keyImprovements.map((s,r)=>e.jsx("li",{className:"insight-item improvement",children:s},r))})]}),l.areasOfConcern.length>0&&e.jsxs("div",{className:"insight-section",children:[e.jsxs("h4",{className:"insight-section-title",children:[e.jsx(P,{className:"insight-section-icon"}),"Areas of Concern"]}),e.jsx("ul",{className:"insight-list",children:l.areasOfConcern.map((s,r)=>e.jsx("li",{className:"insight-item concern",children:s},r))})]}),l.recommendations.length>0&&e.jsxs("div",{className:"insight-section",children:[e.jsxs("h4",{className:"insight-section-title",children:[e.jsx(S,{className:"insight-section-icon"}),"Recommendations"]}),e.jsx("ul",{className:"insight-list",children:l.recommendations.map((s,r)=>e.jsx("li",{className:"insight-item recommendation",children:s},r))})]}),e.jsxs("div",{className:"insight-section",children:[e.jsxs("h4",{className:"insight-section-title",children:[e.jsx(k,{className:"insight-section-icon"}),"Next Phase Focus"]}),e.jsx("p",{className:"insight-focus-text",children:l.nextPhaseFocus})]})]})]})]})};export{oe as ProgressTracking};
